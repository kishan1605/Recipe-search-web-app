<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <style>
        .bg-cover {
            background: url("{{ url_for('static', filename='images/home.jpg') }}");
            /* background-color: #808080;
      background-blend-mode: luminosity; */
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;
        }

        ::placeholder {
            color: white !important;
        }
    </style>
</head>

<body>

    <div class="min-vh-100 d-flex flex-column bg-cover">

        <nav class="navbar navbar-expand-lg bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand text-white fw-bold" href="#"><i class="fa-solid fa-bowl-food"></i> RECIPE
                    ROVER</a>
                <button class="navbar-toggler shadow-none border-0" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fa-solid fa-bars text-white"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link text-white fw-bold" aria-current="page"
                                href="{{ url_for('index') }}">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white fw-bold" href="{{ url_for('login') }}">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white fw-bold text-decoration-underline link-offset-3 active link-underline-light"
                                href="{{ url_for('register') }}">Register</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>


        {% if exists %}
        <div class="position-fixed top-0 toastae start-50 translate-middle-x p-3" style="z-index: 11">
            <div id="liveToast1" class="toast bg-danger bg-opacity-75 hide" role="alert" aria-live="assertive"
                aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body ms-auto text-white">
                        User Already Exists !
                    </div>
                    <button type="button" class="btn-close shadow-none btn-close-white me-2 m-auto"
                        data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            </div>
        </div>
        {% endif %}

        {% if success %}
        <div class="position-fixed top-0 toastae start-50 translate-middle-x p-3" style="z-index: 11">
            <div id="liveToast1" class="toast bg-success bg-opacity-75 hide" role="alert" aria-live="assertive"
                aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body ms-auto text-white">
                        Registration Success !
                    </div>
                    <button type="button" class="btn-close shadow-none btn-close-white me-2 m-auto"
                        data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            </div>
        </div>
        {% endif %}

        {% if error %}
        <div class="position-fixed top-0 toastae start-50 translate-middle-x p-3" style="z-index: 11">
            <div id="liveToast2" class="toast bg-danger bg-opacity-75 hide" role="alert" aria-live="assertive"
                aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body ms-auto text-white">
                        Registration Failed !
                    </div>
                    <button type="button" class="btn-close shadow-none btn-close-white me-2 m-auto"
                        data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            </div>
        </div>
        {% endif %}

        <div class="container my-auto">

            <div class="row justify-content-center">
                <div class="col-md-7">
                    <div class="card bg-dark my-4">
                        <div class="card-body p-4">
                            <h2
                                class="text-white text-decoration-underline link-offset-3 active link-underline-light mb-5">
                                New User</h2>

                            <form method="post" id="userregisterform">

                                <div class="row gy-4">

                                    <div class="col-md-12">
                                        <div class="input-group position-relative">
                                            <input type="text" name="name" id="name"
                                                class="form-control shadow-none bg-dark border-white text-white"
                                                placeholder="Name">
                                            <div class="invalid-tooltip rounded-3 ">
                                                * Enter Name
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <div class="input-group position-relative">
                                            <input type="text" name="email" id="email"
                                                class="form-control shadow-none bg-dark border-white text-white"
                                                placeholder="Email">
                                            <div class="invalid-tooltip rounded-3 alertemail">
                                                * Enter Valid Email
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <div class="input-group position-relative">
                                            <input type="password" name="password" id="password"
                                                class="form-control shadow-none bg-dark border-white text-white"
                                                placeholder="Password">
                                            <div class="invalid-tooltip rounded-3 ">
                                                * Enter Password
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-12">

                                        <label for="interest"
                                            class="form-label text-white text-decoration-underline link-offset-3 active link-underline-light mb-4">Select
                                            Interested Recipe Types :</label>

                                        <div class="btn-group gap-4 flex-wrap position-relative" role="group"
                                            aria-label="Basic checkbox toggle button group">

                                            <input type="checkbox" class="btn-check" id="spicy" autocomplete="off"
                                                name="interest" value="spicy">
                                            <label class="btn btn-outline-light" for="spicy">Spicy</label>

                                            <input type="checkbox" class="btn-check" id="mild" autocomplete="off"
                                                name="interest" value="mild">
                                            <label class="btn btn-outline-light" for="mild">Mild</label>

                                            <input type="checkbox" class="btn-check" id="sweet" autocomplete="off"
                                                name="interest" value="sweet">
                                            <label class="btn btn-outline-light" for="sweet">Sweet</label>

                                            <input type="checkbox" class="btn-check" id="sour" autocomplete="off"
                                                name="interest" value="sour">
                                            <label class="btn btn-outline-light" for="sour">Sour</label>

                                            <input type="checkbox" class="btn-check" id="bitter" autocomplete="off"
                                                name="interest" value="bitter">
                                            <label class="btn btn-outline-light" for="bitter">Bitter</label>

                                            <input type="checkbox" class="btn-check" id="salty" autocomplete="off"
                                                name="interest" value="salty">
                                            <label class="btn btn-outline-light" for="salty">Salty</label>

                                            <input type="checkbox" class="btn-check" id="umami" autocomplete="off"
                                                name="interest" value="umami">
                                            <label class="btn btn-outline-light" for="umami">Umami</label>

                                            <input type="checkbox" class="btn-check" id="vegetarian" autocomplete="off"
                                                name="interest" value="vegetarian">
                                            <label class="btn btn-outline-light" for="vegetarian">Vegetarian</label>

                                            <input type="checkbox" class="btn-check" id="pescatarian" autocomplete="off"
                                                name="interest" value="pescatarian">
                                            <label class="btn btn-outline-light" for="pescatarian">Pescatarian</label>

                                            <input type="checkbox" class="btn-check" id="tangy" autocomplete="off"
                                                name="interest" value="tangy">
                                            <label class="btn btn-outline-light" for="tangy">Tangy</label>
                                            <div class="invalid-tooltip rounded-3 ">
                                                * Select Interest
                                            </div>

                                        </div>

                                    </div>

                                </div>

                                <div class="mt-5 d-flex gap-4">
                                    <input id="reset" type="reset" value="Reset"
                                        class="btn btn-light shadow-none w-100" />
                                    <input id="btnreg" type="submit" value="Register" runat="server"
                                        class="btn btn-primary shadow-none w-100" />
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div>

        </div>



        <!-- <div class="flex-grow-1"></div> -->

        <footer class="bg-secondary text-uppercase text-white text-center border-top border-dark">
            RECIPE ROVER © <span id="year"></span>
        </footer>

    </div>

    <script src="{{ url_for('static', filename='js/jquery.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.js') }}"></script>
    <script>
        $(function () {

            $("#year").html(new Date().getFullYear());



            $('.toast').toast('show');

            $("#userregisterform").on("submit", function (e) {
                debugger;

                var email = $("#email").val()
                var password = $("#password").val()
                var name = $("#name").val()
                var interestlength = $('[name="interest"]:checked').length > 0;
                var testemail = new RegExp("[a-z0-9]+@[a-z]+\.[a-z]{2,3}");
                var testphone = new RegExp("^[6-9][0-9]{9}$");
                var testaadhar = new RegExp("^[2-9]{1}[0-9]{3}[0-9]{4}[0-9]{4}$");
                var testusn = new RegExp("(?=(.*[a-zA-Z])(?=.*[0-9]))");

                if (email != "") {
                    if (!testemail.test(email)) {
                        $(".alertemail").text("* Enter Valid Email");
                        $("#email").addClass("is-invalid");
                        e.preventDefault();
                    } else {
                        $("#email").removeClass("is-invalid");
                    }
                } else {
                    $(".alertemail").text("* Enter Email");
                    $("#email").addClass("is-invalid");
                    e.preventDefault();
                }


                if (password != "") {
                    $("#password").removeClass("is-invalid");
                } else {
                    $("#password").addClass("is-invalid");
                    e.preventDefault();
                }

                if (name != "") {
                    $("#name").removeClass("is-invalid");
                } else {
                    $("#name").addClass("is-invalid");
                    e.preventDefault();
                }

                if (interestlength) {
                    $('[name="interest"]').removeClass("is-invalid");
                } else {
                    $('[name="interest"]').addClass("is-invalid");
                    e.preventDefault();
                }




            })

            $("input,textarea,select").on("keydown change", function () {
                $(this).removeClass("is-invalid")
            })

            $("#reset").on("click", function () {
                $("input,textarea,select").removeClass("is-invalid")
            })
        })
    </script>
</body>

</html>